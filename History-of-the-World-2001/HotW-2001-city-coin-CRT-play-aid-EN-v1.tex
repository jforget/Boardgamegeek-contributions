% -*- encoding: utf-8; indent-tabs-mode: nil -*-
%
%     LATEX + METAPOST script to build the English version of the History of the World playaid.
%     Copyright (C) 2020 Jean Forget
%
%     See the license in the embedded documentation below.
%
\documentclass[a4paper,twocolumn]{article}
\usepackage[english,frenchb,italian]{babel}
\usepackage[T1]{fontenc}
\usepackage[utf8]{luainputenc}
\usepackage{luamplib}
\usepackage{fancyhdr}

% Voir LATEX guide pratique page 235
% marge haute 25.4 - 12 = 13.4 mm
\topmargin=-12mm
\headheight=10mm
\headsep=4mm
% marge basse 297 - (13.4 + 267 + 4) = 12.6mm
\textheight=240mm

% marge gauche 25,4mm,
% marge droite 210 - (25,4 + 173) = 11,6mm
\oddsidemargin=0mm
\marginparsep=0mm
\textwidth=173mm
\columnsep=8mm

%&Latex

\renewcommand{\rmdefault}[0]{ppl}
\renewcommand{\sfdefault}[0]{phv}
\renewcommand{\ttdefault}[0]{pcr}

\newcommand{\datenum}{\number\year-%
\ifnum\month<10\relax0\fi\number\month-%
\ifnum\day<10\relax0\fi\number\day}

\parindent=0mm
\parskip=0pt

\newenvironment{texte}{\rmfamily\footnotesize}{}

\newcommand{\eps}[0]{$\varepsilon$}
\newcommand{\carte}[1]{``\textit{#1}''}

%\pagestyle{myheadings}
%\markright{\sffamily\upshape\kern 8mm\datenum\hfill {\bfseries\normalsize History of the World}\kern 15mm\hfill Page }
\pagestyle{fancy}
\chead{\datenum\hfill \textit{History of the World} Play Aid \hfill }
\cfoot{\scriptsize CC0 (Creative Commons Zero), based on \textit{History of the World}, \copyright{} 2001, Avalon Hill Games, \copyright{} 2001 Hasbro}

%\newcommand{\image}[2]{\includegraphics[#1]{#2}}
\NoAutoSpaceBeforeFDP

\begin{document}
\begin{texte}
\tolerance=1000

\section{Capital, city and monument}

\begin{mplibcode}
beginfig(1);
  xvide =  0; yvide = 40;
  xcite = 60; ycite = 20;
  xcap  =  0; ycap  =  0;
  largeur = 20; hauteur = 5;
  label(btex empty etex, (xvide, yvide));
  label(btex city etex, (xcite, ycite));
  label(btex capital etex, (xcap, ycap));
  draw  (xvide - largeur, yvide - hauteur) -- (xvide + largeur, yvide - hauteur)
                                           -- (xvide + largeur, yvide + hauteur)
                                           -- (xvide - largeur, yvide + hauteur)
                                           -- (xvide - largeur, yvide - hauteur);
  draw  (xcite - largeur, ycite - hauteur) -- (xcite + largeur, ycite - hauteur)
                                           -- (xcite + largeur, ycite + hauteur)
                                           -- (xcite - largeur, ycite + hauteur)
                                           -- (xcite - largeur, ycite - hauteur);
  draw  (xcap  - largeur, ycap  - hauteur) -- (xcap  + largeur, ycap  - hauteur)
                                           -- (xcap  + largeur, ycap  + hauteur)
                                           -- (xcap  - largeur, ycap  + hauteur)
                                           -- (xcap  - largeur, ycap  - hauteur);

  (x1, y1) = ((xvide + xcap) / 2 - 40, (yvide + ycap) / 2);
  drawarrow (xvide - largeur, yvide) .. (x1, y1) .. (xcap - largeur, ycap);
  label.lft(btex Initial Deployment etex, (x1, y1));

  (x2, y2) = ((xvide + 2 * xcite) / 3 - largeur, (yvide + 2 * ycite) / 3);
  drawarrow (xvide, yvide - hauteur) .. (x2, y2) .. (xcite - largeur, ycite);
  label.llft(btex { \it Kingdom } card etex, (x2, y2));

  (x3, y3) = ((xvide + xcite) / 2 + largeur, (yvide + ycite) / 2);
  drawarrow (xcite, ycite + hauteur) .. (x3, y3) .. (xvide + largeur, yvide);
  label.urt(btex Pillage, {\it Disaster} card etex, (x3, y3));

  (x4, y4) = ((xcite + xcap ) / 2 + largeur, (ycite + ycap - hauteur ) / 2);
  drawarrow (xcap + largeur, ycap) .. (x4, y4) .. (xcite, ycite - hauteur);
  label.lrt(btex Pillage, {\it Disaster} card etex, (x4, y4));

endfig;
\end{mplibcode}

\subsection{Capital}

      Obtained during an empire initial deployment.

      Removed after a sack and pillage, replaced by a city. Same thing
      with a \carte{Disaster} card.

      Effect: 2 points.

\subsection{City}

      Obtained when a capital is sacked and pillaged. Or created by a kingdom card.

      Removed  after a second sack and pillage or a \carte{Disaster} card.

      Effect: 1 point.

\subsection{Monument}

      Obtained during the Building phase, if the Empire controls 2 resources.

      Removal: usually stays on board until the end of game. Sometimes,
      removed by a \carte{Disaster} card.

      Effect: 1 point

      Placement Priority:

\begin{enumerate}
\item The capital
\item A city
\item A resource
\end{enumerate}

\section{Coins}

\begin{mplibcode}
beginfig(1);
  xrien     =   0; yrien     =  80;
  xflotte   = -60; yflotte   =  50;
  xmonnaie  =   0; ymonnaie  =   0;
  xarmee    = -30; yarmee    = -40;
  xfort     =  90; yfort     = -40;
  xpool     =   0; ypool     = -80;
  largeur = 20; hauteur = 5;
  label(btex nothing      etex, (xrien, yrien));
  label(btex fleet        etex, (xflotte, yflotte));
  label(btex coins        etex, (xmonnaie, ymonnaie));
  label(btex army         etex, (xarmee, yarmee));
  label(btex fort         etex, (xfort, yfort));
  label(btex initial      etex, (xpool, ypool));
  label(btex army pool    etex, (xpool, ypool - 2 * hauteur));
  draw  (xrien - largeur, yrien - hauteur) -- (xrien + largeur, yrien - hauteur)
                                           -- (xrien + largeur, yrien + hauteur)
                                           -- (xrien - largeur, yrien + hauteur)
                                           -- (xrien - largeur, yrien - hauteur);
  draw  (xflotte - largeur, yflotte - hauteur) -- (xflotte + largeur, yflotte - hauteur)
                                               -- (xflotte + largeur, yflotte + hauteur)
                                               -- (xflotte - largeur, yflotte + hauteur)
                                               -- (xflotte - largeur, yflotte - hauteur);
  draw  (xmonnaie  - largeur, ymonnaie  - hauteur) -- (xmonnaie + largeur, ymonnaie - hauteur)
                                                   -- (xmonnaie + largeur, ymonnaie + hauteur)
                                                   -- (xmonnaie - largeur, ymonnaie + hauteur)
                                                   -- (xmonnaie - largeur, ymonnaie - hauteur);
  draw  (xarmee  - largeur, yarmee  - hauteur) -- (xarmee + largeur, yarmee - hauteur)
                                               -- (xarmee + largeur, yarmee + hauteur)
                                               -- (xarmee - largeur, yarmee + hauteur)
                                               -- (xarmee - largeur, yarmee - hauteur);
  draw  (xfort  - largeur, yfort  - hauteur) -- (xfort + largeur, yfort - hauteur)
                                             -- (xfort + largeur, yfort + hauteur)
                                             -- (xfort - largeur, yfort + hauteur)
                                             -- (xfort - largeur, yfort - hauteur);
  draw  (xpool  - largeur, ypool  - 3 * hauteur) -- (xpool + largeur, ypool - 3 * hauteur)
                                                 -- (xpool + largeur, ypool +     hauteur)
                                                 -- (xpool - largeur, ypool +     hauteur)
                                                 -- (xpool - largeur, ypool - 3 * hauteur);

  (x1, y1) = ((xrien - largeur + xflotte) / 2 - 10, (yrien + yflotte + hauteur) / 2);
  drawarrow (xrien - largeur, yrien) .. (x1, y1) .. (xflotte, yflotte + hauteur);
  label.lft(btex Initial deployment   etex, (x1, y1 + 2 * hauteur));
  label.lft(btex {\it Astronomy} card etex, (x1, y1));

  (x2, y2) = ((xflotte + xmonnaie - largeur) / 2 - 10, (yflotte + ymonnaie + hauteur) / 2);
  drawarrow (xflotte, yflotte - hauteur) .. (x2, y2) .. (xmonnaie - largeur, ymonnaie + 2);
  label.lft(btex {\it Reallocation} card etex, (x2, y2));

  (x3, y3) = ((xmonnaie + xrien) / 2 - 15, (ymonnaie + yrien) / 2);
  drawarrow (xmonnaie -5, ymonnaie + hauteur) .. (x3, y3) .. (xrien -5, yrien - hauteur);
  label.lft(btex     End etex, (x3, y3 + hauteur));
  label.lft(btex of turn etex, (x3, y3 - hauteur));

  (x4, y4) = ((xmonnaie + xarmee) / 2 - 15, (ymonnaie + yarmee) / 2);
  drawarrow (xmonnaie - largeur, ymonnaie - 2) .. (x4, y4) .. (xarmee, yarmee + hauteur);
  label.lft(btex buying back a etex, (x4, y4 + hauteur));
  label.lft(btex defeated army etex, (x4, y4 - hauteur));

  (x5, y5) = ((xmonnaie + xfort) / 2 - 20, (ymonnaie + yfort) / 2);
  drawarrow (xmonnaie, ymonnaie - hauteur) .. (x5, y5) .. (xfort - largeur, yfort);
  label.lft(btex Purchase etex, (x5, y5));

  (x6, y6) = ((xmonnaie + xrien) / 2 + 15, (ymonnaie + yrien) / 2);
  drawarrow (xrien + 5, yrien - hauteur) .. (x6, y6) .. (xmonnaie + 5, ymonnaie + hauteur);
  label.rt(btex \it Allies         etex, (x6, y6 + 2 * hauteur));
  label.rt(btex \it Pop. explosion etex, (x6, y6));
  label.rt(btex \it Civil service  etex, (x6, y6 - 2 * hauteur));
  label.rt(btex cards              etex, (x6, y6 - 4 * hauteur));

  (x71, y71) = ((xrien + largeur + xfort) / 2 + 15, (3 * yrien + yfort + hauteur) / 4);
  (x72, y72) = ((xrien + largeur + 2 * xfort) / 3 + 15, (yrien + 3 * (yfort + hauteur)) / 4);
  drawarrow (xrien + largeur, yrien - 2) .. (x71, y71) .. (x72, y72) .. (xfort - 2, yfort + hauteur);
  label.lft(btex  \it Engineering etex, (x72, y72));
  label.lft(btex             Card etex, (x72, y72 - 2 * hauteur));

  (x81, y81) = ((xrien + largeur + 2 * xfort) / 3 + 25, (yrien + 3 * (yfort + hauteur)) / 4);
  (x82, y82) = ((xrien + largeur + xfort) / 2 + 25, (3 * yrien + yfort + hauteur) / 4);
  drawarrow (xfort + 2, yfort + hauteur) .. (x81, y81) .. (x82, y82) .. (xrien + largeur, yrien + 2);
  label.rt(btex Defeat          etex, (x82, y82 + 10 * hauteur));
  label.rt(btex \it Famine      etex, (x82, y82 +  8 * hauteur));
  label.rt(btex \it Plague      etex, (x82, y82 +  6 * hauteur));
  label.rt(btex \it Black Death etex, (x82, y82 +  4 * hauteur));
  label.rt(btex \it Pestilence  etex, (x82, y82 +  2 * hauteur));
  label.rt(btex cards           etex, (x82, y82));

  (x9, y9) = ((xpool + largeur + xfort - hauteur) / 2 + 15, (ypool + yfort - hauteur) / 2);
  drawarrow (xpool + largeur, ypool - hauteur) .. (x9, y9) .. (xfort, yfort - hauteur);
  label.lrt(btex Conversion etex, (x9, y9));

endfig;
\end{mplibcode}

\subsection{Coins}

      Received:
      \begin{itemize}
      \item \carte{Reallocation} card, allowing the player to convert fleets into coins;
      \item \carte{Allies} or \carte{Population Explosion} cards giving two coins;
      \item \carte{Civil Service} card giving a variable number of coins.
      \end{itemize}

      Effect: buying an army from the defeated army pool or building a fort

      Unused coins are lost at the end of the empire's turn

\subsection{Fort}

      Received:
      \begin{itemize}
      \item spending a coin;
      \item conversion of an unplaced army;
      \item the \carte{Engineering} card which gives 2 free forts if the empire has a capital.
      \end{itemize}

      Effect: the fort provides a +1 DRM when defending and it absorbs the first
      combat loss.

      Removed: when a combat is lost; or through the \carte{Famine},
      \carte{Plague}, \carte{Black Death} and \carte{Pestilence} cards.

\subsection{Fleet}

      Received:
      \begin{itemize}
      \item initial deployment as printed on the empire card;
      \item \carte{Astronomy} card.
      \end{itemize}

      Removed: at the end of the empire turn; or converted into a coin
      with the \carte{Reallocation} card.

      Effect: allows expansion through the seas and oceans.

\section{Combat Table}

\begin{tabular}[t]{|p{20mm}|p{20mm}|p{12mm}|p{13mm}|}
\hline
       Attacker's card      & Defender's terrain  &  Att's dice          & Def's dice \\
\hline
      (nothing)             & normal              &         2D6          &       1D6         \\
\hline
      (nothing)             & Great Wall          &                      &       2D6         \\
\hline
      (nothing)             & Montains            &                      &       2D6         \\
\hline
Expert Troops: Mountains    & Montains            &                      &       1D6         \\
\hline
      (nothing)             & Forests             &                      &       2D6         \\
\hline
 Expert Troops: Forests     & Forests             &                      &       1D6         \\
\hline
      (nothing)             & Strait              &                      &       2D6         \\
\hline
 Expert Troops: Straits     & Strait              &                      &       1D6         \\
\hline
      (nothing)             & Naval landing       &                      &       3D6         \\
\hline
Naval Power                 & Naval landing       &                      &       2D6         \\
\hline
      (nothing)             & Fort                &                      & \textit{n}D6+1    \\
\hline
    Siegecraft              & Capital, city or
                                    fort          &        nD6+1         &                   \\
\hline
Leader (until the first
triple result)              &                     &         3D6          &                   \\
\hline
     Weaponry               &                     & \textit{n}D6+1       &                   \\
\hline
 Jihad (until first defeat) &                     &       3D6+\eps       &                   \\
\hline
 Jihad (after first defeat) &                     &       2D6+\eps       &                   \\
\hline
 Jihad (after second defeat) &                     &         2D6          &                   \\
\hline
 Elite (until first defeat)  &                     & \textit{n}D6+\eps    &                   \\
\hline

\end{tabular}

\eps{} : some kind of fractional pip, its only use is to break ties in the player's favor.

\textit{n}D6+... : see another line to get the value of \textit{n}.

\end{texte}
\end{document}

=encoding utf-8

=head1 Description

Utility script  to build the English  version of the I<History  of the
World> playaid.

=head1 Usage

  lualatex HotW-2001-city-coin-CRT-play-aid-EN-v1.tex

=head1 Description

This LuaLATEX  file gives a summary  of some rules from  Avalon Hill's
and Hasbro's I<History of the World> (the 2001 version).

The rules describing capitals and  cities, the rules governing the use
of  coins, and  the  rules  describing special  cases  for combat  are
scattered over  the rule booklet, plus  the event cards. The  play aid
build  by  this program  aims  at  gathering  these rules  into  three
comprehensive paragraphs.

=head1 Copyright and License

=head2 PDF File

Copyright (c) 2020 Jean Forget

The PDF file built by this program is licensed under the
CC0 (Creative Commons Zero) license.

=head2 Program

Copyright (c) 2020 Jean Forget

This program is distributed under the GNU Public License version 1 or later.

Here is the summary of GPL:

This program is  free software; you can redistribute  it and/or modify
it under the  terms of the GNU General Public  License as published by
the Free  Software Foundation; either  version 1, or (at  your option)
any later version.

This program  is distributed in the  hope that it will  be useful, but
WITHOUT   ANY  WARRANTY;   without  even   the  implied   warranty  of
MERCHANTABILITY  or FITNESS  FOR  A PARTICULAR  PURPOSE.  See the  GNU
General Public License for more details.

You should  have received  a copy  of the  GNU General  Public License
along  with  this  program;  if   not,  write  to  the  Free  Software
Foundation, Inc., L<https://www.fsf.org/>.

